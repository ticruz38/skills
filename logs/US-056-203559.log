â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ The user wants me to act as an autonomous coding agent called "Ralph". I need
  to:

  1. Read the PRD at prd.json
  2. Read the progress log at progress.txt
  3. Check the branch
  4. Pick the highest priority user story where passes: false
  5. Implement it
  6. Run quality checks
  7. Update AGENTS.md if needed
  8. Commit changes
  9. Update the PRD
  10. Append progress to progress.txt

  Let me start by reading the PRD and progress files.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt file to see the remaining content.
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt to see if there are more recent entri
  es and find the highest priority story that still needs to be implemented.
â€¢ Used ReadFile (progress.txt)
â€¢ Now I have the complete picture. Looking at the PRD, the remaining stories wit
  h passes: false are:

  1. US-056 (Priority 56) - showing-scheduler skill - Schedule property showings
     epends: calendar, client-crm)
  2. US-057 (Priority 57) - pantry-tracker skill - Track pantry inventory
  3. US-058 (Priority 58) - diy-guides skill - Step-by-step repair guides
  4. US-059 (Priority 59) - review-monitor skill - Monitor and respond to review
  5. US-060 (Priority 60) - saved-searches skill - Save and rerun searches autom
     cally

  The highest priority story with passes: false is US-056 - showing-scheduler sk
  ill. This skill depends on calendar and client-crm skills.

  Let me check the current branch and then start implementing the showing-schedu
  ler skill.
â€¢ Now I have the full picture. Looking at the PRD, the highest priority story wi
  th passes: false is:

  US-056 - showing-scheduler skill (Priority 56)

  â€¢ Title: "Create showing-scheduler skill for real estate"
  â€¢ Description: Schedule property showings
  â€¢ Dependencies: calendar, client-crm
  â€¢ Acceptance Criteria: Calendar coordination, Lockbox code storage, Client fee
    ack collection, Route optimization, Typecheck passes

  Let me check the current branch and start implementing this skill.
â€¢ Used Shell (git branch --show-current && git status)
â€¢ Used Glob (skills/calendar/SKILL.md)
â€¢ Used Glob (skills/client-crm/SKILL.md)
â€¢ Good, I'm on the correct branch ralph/all-skills. Now let me read the SKILL.md
  files for the dependencies (calendar and client-crm) to understand how to use
  them.
â€¢ Used ReadFile (skills/calendar/SKILL.md)
â€¢ Used ReadFile (skills/client-crm/SKILL.md)
â€¢ Now I have a good understanding of the dependencies. Let me also look at the s
  tructure of a similar skill to understand the pattern better. Let me look at a
  n existing skill that depends on calendar and another skill.
â€¢ Let me also look at a skill that integrates with calendar to understand the im
  plementation pattern better:
â€¢ Used ReadFile (skills/reservation-manager/src/index.ts)
â€¢ Now I have a good understanding of the patterns. Let me create the showing-sch
  eduler skill that:

  1. Depends on calendar and client-crm skills
  2. Implements property showing scheduling
  3. Includes lockbox code storage
  4. Client feedback collection
  5. Route optimization

  Let me now create the showing-scheduler skill.
â€¢ Now I have a good understanding of the patterns. Let me create the showing-sch
  eduler skill. I'll set up the complete structure:
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure â†
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes
â€¢ Let me now create the showing-scheduler skill. I'll start with the directory s
  tructure and package.json.
â€¢ Used Shell (mkdir -p skills/showing-scheduler/src)
â€¢ Now let me create the package.json file with the dependencies on calendar and
  client-crm skills.
â€¢ Used WriteFile (skills/showing-scheduler/package.json)
â€¢ Used WriteFile (skills/showing-scheduler/tsconfig.json)
â€¢ Used WriteFile (skills/showing-scheduler/.gitignore)
â€¢ Now let me create the SKILL.md documentation file.
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation â†
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes
â€¢ Now let me create the SKILL.md documentation file for the showing-scheduler sk
  ill.
â€¢ Used WriteFile (skills/showing-scheduler/SKILL.md)
â€¢ Now let me create the main library file (src/index.ts) for the showing-schedul
  er skill. This will be a comprehensive file that includes all the functionalit
  y.
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library â†
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes
â€¢ Now let me create the main library file. This is a large file so I'll create i
  t in parts.
â€¢ Used WriteFile (skills/showing-scheduler/src/index.ts)
â€¢ Now I need to continue with the main library methods. Let me append the remain
  ing methods to the index.ts file.
â€¢ Used WriteFile (skills/showing-scheduler/src/index.ts)
â€¢ Now let me continue adding the route optimization and statistics methods to co
  mplete the index.ts file.
â€¢ Used WriteFile (skills/showing-scheduler/src/index.ts)
â€¢ Now I need to create the CLI file. Let me create a comprehensive CLI interface
  .
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface â†
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes
â€¢ Now let me create the CLI file. This is going to be a large file so I'll creat
  e it in parts.
â€¢ Used WriteFile (skills/showing-scheduler/src/cli.ts)
â€¢ Now let me update the todo list and run the typecheck and build.
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build â†
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes
â€¢ Now let me run npm install and then typecheck.
â€¢ Used Shell (cd skills/showing-scheduler && npm install 2>&1)
â€¢ Good, npm install succeeded. Now let me run typecheck.
â€¢ Used Shell (cd skills/showing-schedul...&& npm run typecheck 2>&1)
  Failed with exit code: 2
â€¢ I have three TypeScript errors to fix:

  1. ClientCRMConfig doesn't have 'profile' property - I need to check how Clien
     MSkill is configured
  2. Type issue with keyof Showing on updates
  3. followUpRequested type issue

  Let me check the client-crm skill's index.ts to understand the constructor sig
  nature.
â€¢ Let me check the client-crm skill configuration:
â€¢ Used ReadFile (skills/client-crm/src/index.ts)
â€¢ Let me check how ClientCRMSkill is constructed by reading more of the file:
â€¢ Used ReadFile (skills/client-crm/src/index.ts)
â€¢ I see - the ClientCRMConfig only has dataDir, not profile. I need to fix my co
  de to not pass profile to the CRM. Let me also fix the other type issues.Let m
  e fix the three TypeScript errors:1. Remove profile from ClientCRMSkill constr
  uctor (only use dataDir) 2. Fix the keyof issue by using a different approach
  3. Fix the followUpRequested type issue
â€¢ I see the issues. Let me fix the TypeScript errors:
â€¢ Used StrReplaceFile (skills/showing-scheduler/src/index.ts)
â€¢ Now let me run typecheck again.
â€¢ Used Shell (cd skills/showing-schedul...&& npm run typecheck 2>&1)
â€¢ Typecheck passed! Now let me run the build.
â€¢ Typecheck passed! Now let me build:
â€¢ Used Shell (cd skills/showing-scheduler && npm run build 2>&1)
â€¢ Build succeeded! Now let me update the todo list, update prd.json, and update
  progress.txt.
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt â†
  â€¢ Commit changes
â€¢ Now let me update prd.json to set US-056 as passes: true, and add to progress.
  txt.
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me append to progress.txt with the learnings from this implementation.
â€¢ Used WriteFile (progress.txt)
â€¢ Now let me commit the changes.
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes â†
â€¢ Now let me commit the changes with a proper commit message.
â€¢ Used Shell (git add -A && git status)
â€¢ Now let me commit these changes.
â€¢ Used Shell (git commit -m "feat: US-0...er skill for real estate")
â€¢ Commit was successful. Now let me update the todo list and verify the remainin
  g stories.
â€¢ Used SetTodoList
  â€¢ Create showing-scheduler directory structure
  â€¢ Create package.json with dependencies
  â€¢ Create tsconfig.json
  â€¢ Create SKILL.md documentation
  â€¢ Implement src/index.ts main library
  â€¢ Implement src/cli.ts CLI interface
  â€¢ Create .gitignore
  â€¢ Run typecheck and build
  â€¢ Update prd.json and progress.txt
  â€¢ Commit changes
â€¢ Let me verify the remaining stories with passes: false to see if there are mor
  e to implement.
â€¢ Let me verify the remaining incomplete stories:
â€¢ Used Grep ("passes": false)
â€¢ There are still 4 remaining stories with passes: false:

  â€¢ US-057 (Priority 57): pantry-tracker skill
  â€¢ US-058 (Priority 58): diy-guides skill
  â€¢ US-059 (Priority 59): review-monitor skill
  â€¢ US-060 (Priority 60): saved-searches skill

  Since not all stories are complete, I should end my response normally without
  the COMPLETE promise.
â€¢ I've successfully completed US-056 - the showing-scheduler skill. Here's a sum
  mary of what was implemented:

  Summary

  Showing Scheduler Skill - A real estate property showing management system wit
  h the following features:

  Core Features

  â€¢ Property Showing Scheduling: Schedule showings with client linking, date/tim
    duration
  â€¢ Calendar Integration: Automatic Google Calendar event creation and sync
  â€¢ Lockbox Management: Secure storage and retrieval of lockbox codes with acces
    notes
  â€¢ Client Feedback Collection: Ratings (1-5), interest levels, comments, pros/c
    s, price opinions
  â€¢ Route Optimization: Nearest neighbor algorithm for efficient multi-showing r
    tes

  Database Schema

  â€¢ showings table - property details, client linking, lockbox codes, calendar e
    nt IDs
  â€¢ feedback table - ratings, interest levels, pros/cons, follow-up tracking

  CLI Commands

  â€¢ schedule, list, get, update, cancel, complete, confirm, no-show - CRUD opera
    ons
  â€¢ lockbox, set-lockbox - Lockbox code management
  â€¢ feedback, feedback-get - Client feedback collection
  â€¢ route, optimize - Route optimization
  â€¢ today, upcoming - Quick viewing commands
  â€¢ stats, health - Monitoring

  Dependencies

  â€¢ @openclaw/calendar - For calendar integration
  â€¢ @openclaw/client-crm - For client data management

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Remaining stories to complete:

  â€¢ US-057 (Priority 57): pantry-tracker skill
  â€¢ US-058 (Priority 58): diy-guides skill
  â€¢ US-059 (Priority 59): review-monitor skill
  â€¢ US-060 (Priority 60): saved-searches skill
