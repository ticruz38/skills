â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me start by understanding the task. I'm an autonomous coding agent working
  on a software project. I need to:

  1. Read the PRD at prd.json
  2. Read the progress log at progress.txt
  3. Check I'm on the correct branch
  4. Pick the highest priority user story where passes: false
  5. Implement that story
  6. Run quality checks
  7. Update AGENTS.md if needed
  8. Commit changes
  9. Update PRD to set passes: true
  10. Append progress to progress.txt

  Let me start by reading the necessary files.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt file to get the full context and unde
  rstand the codebase patterns better.
â€¢ Used ReadFile (progress.txt)
â€¢ Now I have a good understanding of the project. Let me check the current branc
  h and identify the next story to work on. According to the PRD, the branch sho
  uld be ralph/all-skills. I need to find the highest priority story where passe
  s: false.

  Looking at the PRD:

  â€¢ US-031: news-aggregator skill (priority 31, passes: false)
  â€¢ US-032: summarizer skill (priority 32, passes: false)
  â€¢ US-033: inbox-triage skill (priority 33, passes: false)
  â€¢ ... and so on

  The next story to work on is US-031: Create news-aggregator skill for RSS feed
  s.

  Let me check the current git branch and start working on US-031.
â€¢ Now I have a good understanding of the project. Let me check the current branc
  h and identify the next story to implement.
â€¢ Used Shell (git branch --show-current...--" && git status --short)
â€¢ I'm on the correct branch ralph/all-skills. The progress.txt shows modificatio
  ns but that's expected. Now I need to implement the next story with passes: fa
  lse.

  Looking at the PRD, the next story to implement is: US-031: Create news-aggreg
  ator skill for RSS feeds (priority 31, passes: false)

  Acceptance Criteria:

  â€¢ RSS/Atom parsing
  â€¢ Keyword filtering
  â€¢ Source management
  â€¢ Deduplication
  â€¢ SQLite storage
  â€¢ Typecheck passes

  Notes: No API key needed

  Let me implement this skill following the codebase patterns I've learned from
  the progress.txt.
â€¢ I'm on the correct branch ralph/all-skills. Looking at the PRD, the next story
  to implement is US-031: Create news-aggregator skill for RSS feeds (priority 3
  1, passes: false).

  Let me implement this skill following the established codebase patterns.
â€¢ Used Shell (mkdir -p skills/news-aggr...ls -la skills/ | head -20)
â€¢ Good, the directory structure is set up. Now let me create the news-aggregator
  skill. I'll look at an existing similar skill to understand the patterns bette
  r. Let me look at the web-search skill structure since it's similar (no extern
  al dependencies, local storage).
â€¢ Used Shell (ls -la skills/web-search/...s/web-search/package.json)
â€¢ Now let me check the web-search SKILL.md to understand the documentation forma
  t:
â€¢ Used ReadFile (skills/web-search/SKILL.md)
â€¢ Used ReadFile (skills/web-search/tsconfig.json)
â€¢ Used ReadFile (skills/web-search/.gitignore)
â€¢ Now let me look at the web-search implementation to understand the pattern for
  no-dependency skills:
â€¢ Used ReadFile (skills/web-search/src/index.ts)
â€¢ Used ReadFile (skills/web-search/src/cli.ts)
â€¢ Now I have a clear understanding of the pattern. Let me create the news-aggreg
  ator skill. I need to implement:

  1. RSS/Atom parsing
  2. Keyword filtering
  3. Source management
  4. Deduplication
  5. SQLite storage
  6. Typecheck passes

  I'll need to use an RSS parsing library. Looking at the requirements, I should
  use a library that can parse RSS/Atom feeds. rss-parser is a good choice, or I
  can implement a simple XML parser. For simplicity and following the pattern of
  using native Node.js modules where possible, I'll use https/http to fetch feed
  s and parse them manually, or I can add rss-parser as a dependency.

  Let me check if there's a pattern for adding external dependencies. Looking at
  the existing skills, they mostly use native Node.js modules. For RSS parsing,
  I'll use fast-xml-parser which is lightweight and has no native dependencies.

  Let me create the skill now.
â€¢ Now I understand the pattern. Let me create the news-aggregator skill with RSS
  /Atom parsing, keyword filtering, source management, and deduplication.
â€¢ Used WriteFile (skills/news-aggregator/package.json)
â€¢ Used WriteFile (skills/news-aggregator/tsconfig.json)
â€¢ Used WriteFile (skills/news-aggregator/.gitignore)
â€¢ Now let me create the main index.ts file for the news-aggregator skill.
â€¢ Used WriteFile (skills/news-aggregator/src/index.ts)
â€¢ Now let me create the CLI file for the news-aggregator skill.
â€¢ Used WriteFile (skills/news-aggregator/src/cli.ts)
â€¢ Now let me create the SKILL.md documentation file.
â€¢ Used WriteFile (skills/news-aggregator/SKILL.md)
â€¢ Now let me install dependencies and run the typecheck to verify everything wor
  ks.
â€¢ Now let me install dependencies and run typecheck:
â€¢ Used Shell (cd skills/news-aggregator && npm install 2>&1)
â€¢ Good, dependencies are installed. Now let me run typecheck.
â€¢ Used Shell (cd skills/news-aggregator...&& npm run typecheck 2>&1)
â€¢ Typecheck passes! Now let me run the build to make sure it compiles correctly.
â€¢ Typecheck passes. Let me also build and verify the skill works:
â€¢ Used Shell (cd skills/news-aggregator && npm run build 2>&1)
â€¢ Excellent! Build succeeds. Let me test the CLI to make sure it works properly.
â€¢ Used Shell (cd skills/news-aggregator...e dist/cli.js health 2>&1)
â€¢ The skill is working. Let me also test a few more CLI commands to make sure ev
  erything is functioning.
â€¢ Used Shell (cd skills/news-aggregator...de dist/cli.js stats 2>&1)
â€¢ Used Shell (cd skills/news-aggregator...rss" --category tech 2>&1)
â€¢ The skill is working well. Now let me update the PRD to mark US-031 as complet
  e, and append to the progress.txt file.
â€¢ Excellent! The skill is working. Now let me update the PRD and progress log:
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me append the progress to the progress.txt file.
â€¢ Used WriteFile (progress.txt)
â€¢ Now let me commit the changes. First, let me check git status to see all modif
  ied files.
â€¢ Now let me commit all the changes:
â€¢ Used Shell (cd /root/code/skills && git add -A && git status)
â€¢ Now let me commit with the proper message format.
â€¢ Used Shell (cd /root/code/skills && g...ator skill for RSS feeds")
â€¢ I have successfully completed US-031 (news-aggregator skill). Let me check if
  there are more stories to implement. Looking at the PRD, the next story is US-
  032 (summarizer skill).

  Since I've completed one story and there are more stories with passes: false,
  I should end my response normally and let the next iteration pick up the next
  story.
â€¢ I've successfully completed US-031: Create news-aggregator skill for RSS feeds
  .

  Summary

  Created a complete RSS/Atom feed aggregator with:

  Features Implemented

  â€¢ RSS/Atom parsing using fast-xml-parser library
  â€¢ Source management - Add, remove, enable/disable feed sources with categories
  â€¢ Keyword filtering - Include/exclude filters with priority scoring
  â€¢ Deduplication - Find and remove duplicate items by GUID
  â€¢ SQLite storage for all data with proper indexing
  â€¢ Full CLI with commands for all operations

  Files Created

  â€¢ skills/news-aggregator/package.json - Dependencies (sqlite3, fast-xml-parser
  â€¢ skills/news-aggregator/tsconfig.json - TypeScript config
  â€¢ skills/news-aggregator/.gitignore - Git ignore rules
  â€¢ skills/news-aggregator/SKILL.md - Documentation
  â€¢ skills/news-aggregator/src/index.ts - Main library (~800 lines)
  â€¢ skills/news-aggregator/src/cli.ts - CLI interface (~600 lines)

  Verification

  â€¢ âœ… Typecheck passes
  â€¢ âœ… Build succeeds
  â€¢ âœ… CLI tested and working
  â€¢ âœ… PRD updated (passes: true)
  â€¢ âœ… Progress logged
  â€¢ âœ… Changes committed

  The next story to implement is US-032: Create summarizer skill for text summar
  ization (priority 32, passes: false).
