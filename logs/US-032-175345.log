â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me start by reading the PRD and progress files to understand what I need t
  o do.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt file since it seems to have more cont
  ent.
â€¢ Used ReadFile (progress.txt)
â€¢ Looking at the prd.json file, I can see that the next story to implement is US
  -032 - "Create summarizer skill for text summarization". This skill depends on
  the main model and doesn't need external API keys. It should:

  1. Summarize articles and documents
  2. Extract key points
  3. Have adjustable length

  Let me check the current branch and then implement this skill.
â€¢ Now I understand the project structure. Looking at the PRD, the next story to
  implement is US-032 - "Create summarizer skill for text summarization". This i
  s a model-based skill that doesn't need external APIs.

  Let me first check the current branch and explore the existing skills structur
  e:
â€¢ Used Shell (cd /root/code/skills && git branch --show-current)
â€¢ Used Shell (ls -la /root/code/skills/skills/)
â€¢ Used Shell (cat /root/code/skills/ski...s/web-search/package.json)
â€¢ I have a solid understanding of the project layout. Now, I need to implement t
  he 'summarizer' skill (US-032). The requirements are clear: it needs to handle
  article and document summarization, extract key points, and allow for adjustab
  le summary lengths.

  Wait, since this skill is model-based and doesn't rely on external APIs, I sho
  uld mirror the architecture of similar existing skills to maintain consistency
  . content-writer and engagement-replies are the best candidates for this.

  Before I start scaffolding the new skill's files, I need to verify how they ha
  ndle their SKILL.md metadata and how they structure their TypeScript source fi
  les. Specifically, I want to see how they define their CLI entry points in src
  /cli.ts. This will ensure the new summarizer skill integrates perfectly with t
  he existing framework. I'll start by examining the configurations of these two
  reference skills.
â€¢ Now I'll create the summarizer skill. Let me look at a similar skill for refer
  ence:
â€¢ Used ReadFile (skills/content-writer/SKILL.md)
â€¢ Used ReadFile (skills/engagement-replies/src/cli.ts)
â€¢ Now I have a good understanding of the project structure. Let me create the su
  mmarizer skill with the following features:

  1. Article summarization
  2. Document summarization
  3. Key points extraction
  4. Adjustable length (short, medium, long)

  Let me create the directory structure and all the necessary files.
â€¢ Now I'll create the summarizer skill. Let me create the directory structure an
  d files:
â€¢ Used Shell (mkdir -p /root/code/skills/skills/summarizer/src)
â€¢ Now let me create all the files for the summarizer skill.
â€¢ Used WriteFile (skills/summarizer/package.json)
â€¢ Used WriteFile (skills/summarizer/tsconfig.json)
â€¢ Used WriteFile (skills/summarizer/.gitignore)
â€¢ Now let me create the main index.ts file for the summarizer skill. This will i
  nclude:

  1. Text summarization with adjustable length
  2. Key points extraction
  3. SQLite storage for history
  4. Document and article support
â€¢ Used WriteFile (skills/summarizer/src/index.ts)
â€¢ Now let me create the CLI file for the summarizer skill.
â€¢ Now let me create the CLI:
â€¢ Used WriteFile (skills/summarizer/src/cli.ts)
â€¢ Now let me create the SKILL.md documentation file.
â€¢ Used WriteFile (skills/summarizer/SKILL.md)
â€¢ Now let me run the typecheck to make sure everything compiles correctly.
â€¢ Now let me install dependencies and run typecheck:
â€¢ Used Shell (cd /root/code/skills/skil...rizer && npm install 2>&1)
â€¢ Good, the dependencies are installed. Now let me run the typecheck to verify e
  verything compiles.
â€¢ Used Shell (cd /root/code/skills/skil...&& npm run typecheck 2>&1)
â€¢ Typecheck passes. Now let me build the project and test it to make sure everyt
  hing works.
â€¢ Typecheck passes. Let me build and test the skill:
â€¢ Used Shell (cd /root/code/skills/skil...zer && npm run build 2>&1)
â€¢ Build succeeded. Let me test the CLI to make sure it works.
â€¢ Used Shell (cd /root/code/skills/skil...e dist/cli.js health 2>&1)
â€¢ Used Shell (cd /root/code/skills/skil...rticle -l short -k 3 2>&1)
â€¢ The skill is working. Let me test a few more features like the stats and histo
  ry commands to make sure everything is functioning properly.
â€¢ Excellent! Let me test a few more features:
â€¢ Used Shell (cd /root/code/skills/skil...de dist/cli.js stats 2>&1)
â€¢ Used Shell (cd /root/code/skills/skil... dist/cli.js history 2>&1)
â€¢ Everything is working. Let me test the file summarization feature and the diff
  erent formats.
â€¢ Let me test a few more features to ensure complete functionality:
â€¢ Used Shell (cat > /tmp/test-doc.txt <...EOF cat /tmp/test-doc.txt)
â€¢ Good, now let me test the file summarization with different formats.
â€¢ Used Shell (cd /root/code/skills/skil...--format bullet -k 5 2>&1)
â€¢ The skill is working well! Now let me commit the changes and update the PRD.
â€¢ The skill is working well. Now let me commit the changes and update the PRD:
â€¢ Used Shell (cd /root/code/skills && g...add -A && git status 2>&1)
â€¢ The git status looks good. Let me commit the changes.
â€¢ Used Shell (cd /root/code/skills && g... text summarization" 2>&1)
â€¢ Good, now let me update the PRD to set US-032 as passing.
â€¢ Now let me update the PRD and progress log:
â€¢ Used StrReplaceFile (prd.json)
  No replacements made
â€¢ Let me read the prd.json again to see the exact format.
â€¢ Used ReadFile (prd.json)
â€¢ I see the exact format now. Let me make the replacement with the correct strin
  g.
â€¢ Used StrReplaceFile (prd.json)
â€¢ Good, now let me update the progress.txt file with the new entry.
â€¢ Now let me append to the progress log:
â€¢ Used WriteFile (progress.txt)
â€¢ The task is complete. Let me verify that everything is working by running one
  more test.
â€¢ Let me verify the PRD update and run a final verification:
â€¢ Used Shell (cd /root/code/skills && g...'"id": "US-032"' prd.json)
â€¢ Used Shell (cd /root/code/skills/skil...echo "âœ“ Typecheck passes")
â€¢ The summarizer skill has been successfully implemented. Let me verify the PRD
  passes flag was updated correctly.
â€¢ Used Shell (cd /root/code/skills && g..."' prd.json | grep passes)
â€¢ Let me search for the passes field specifically.
â€¢ Used Shell (cd /root/code/skills && g... true' prd.json | head -5)
â€¢ The PRD has been updated correctly. The US-032 story now has passes: true. The
  implementation is complete.

  Let me provide a summary of what was done.
â€¢ The implementation is complete. Here's a summary:

  Completed: US-032 - Create summarizer skill for text summarization

  What was implemented:

  â€¢ Summarizer skill that uses local text processing algorithms (no external API
  â€¢ Extractive summarization with sentence scoring based on:
    â€¢ Document-type keywords (article, document, email, meeting, research)
    â€¢ Focus keywords for emphasizing specific topics
    â€¢ Statistical indicators (percentages, currency)
    â€¢ Structural cues and optimal sentence length
  â€¢ Adjustable length: short (10%), medium (20%), long (35%) compression
  â€¢ Output formats: paragraph, bullet points, numbered list
  â€¢ Key points extraction with configurable count
  â€¢ SQLite storage for summary history and statistics
  â€¢ Full CLI with commands: summarize, file, history, get, stats, clear, delete,
    ealth

  Files created:

  â€¢ skills/summarizer/package.json
  â€¢ skills/summarizer/tsconfig.json
  â€¢ skills/summarizer/.gitignore
  â€¢ skills/summarizer/SKILL.md
  â€¢ skills/summarizer/src/index.ts
  â€¢ skills/summarizer/src/cli.ts

  Committed:

  â€¢ feat: US-032 - Create summarizer skill for text summarization

  PRD updated:

  â€¢ US-032 now has passes: true

  The next story to implement is US-033 - "Create inbox-triage skill for email s
  orting" which depends on the email skill and uses the model for classification
  .
