â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me start by reading the PRD file and the progress log to understand what n
  eeds to be done.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt to understand the codebase patterns b
  etter and see which user story should be implemented next.
â€¢ Used ReadFile (progress.txt)
â€¢ Used Shell (cd /root/code/skills && git branch)
â€¢ Now I have a good understanding of the project. Let me look at the PRD to find
  the next story with passes: false and the highest priority.

  Looking at the PRD:

  â€¢ US-001 to US-041 are all passes: true
  â€¢ US-042 (property-alerts) - priority 42, passes: false
  â€¢ US-043 (client-crm) - priority 43, passes: false
  â€¢ US-044 (data-connector) - priority 44, passes: false
  â€¢ US-045 (chart-generator) - priority 45, passes: false
  â€¢ US-046 (reservation-manager) - priority 46, passes: false
  â€¢ US-047 (ticket-triage) - priority 47, passes: false
  â€¢ US-048 (response-drafts) - priority 48, passes: false
  â€¢ US-049 (scheduling-links) - priority 49, passes: false
  â€¢ US-050 (buffer-time) - priority 50, passes: false
  â€¢ US-051 (focus-time-blocks) - priority 51, passes: false
  â€¢ US-052 (report-builder) - priority 52, passes: false
  â€¢ US-053 (monthly-reports) - priority 53, passes: false
  â€¢ US-054 (competitor-monitor) - priority 54, passes: false
  â€¢ US-055 (email-summarizer) - priority 55, passes: false
  â€¢ US-056 (showing-scheduler) - priority 56, passes: false
  â€¢ US-057 (pantry-tracker) - priority 57, passes: false
  â€¢ US-058 (diy-guides) - priority 58, passes: false
  â€¢ US-059 (review-monitor) - priority 59, passes: false
  â€¢ US-060 (saved-searches) - priority 60, passes: false

  The next one to implement is US-042 (property-alerts) with priority 42. This s
  kill monitors property listings with saved searches, instant alerts, filtering
  , and price change detection. It can optionally use the Zillow API or web scra
  ping for data. Let me check the existing skills directory structure to underst
  and how to build this.
â€¢ I need to implement the next user story. Let me check which one has passes: fa
  lse with the highest priority:
â€¢ Used Shell (cd /root/code/skills && c...y(stories[0], null, 2));")
  Failed with exit code: 1
â€¢ Used Glob (skills/*)
â€¢ Let me use a different approach to parse the prd.json file:
â€¢ Used Shell (cd /root/code/skills && n...(stories[0], null, 2)); ")
â€¢ The next story is US-042 - Create property-alerts skill for real estate. Let m
  e look at the existing skill structure to understand the patterns better, then
  implement this skill.
â€¢ Now I need to implement US-042 - Create property-alerts skill for real estate.
  Let me check existing similar skills for patterns:
â€¢ Used ReadFile (skills/flight-search/package.json)
â€¢ Used ReadFile (skills/alerts/package.json)
â€¢ Used ReadFile (SKILL.md)
â€¢ Now I have a good understanding. I need to create a property-alerts skill for
  real estate. Let me look at the flight-search skill for patterns since it's si
  milar in structure (search + alerts + SQLite storage):
â€¢ Used ReadFile (skills/flight-search/src/index.ts)
â€¢ Used ReadFile (skills/flight-search/tsconfig.json)
â€¢ I've analyzed the existing skill structures like flight-search and alerts, whi
  ch provide a solid template for the new property-alerts skill. The requirement
  s for this skill include saved searches, instant alerts, filtering, and price
  change detection. To implement this effectively, I'll need a robust data model
  for listings and a mechanism to track historical prices for comparison.

  Wait, before I jump into writing the TypeScript implementation and the SKILL.m
  d documentation, I need to establish a proper directory structure. If I don't
  create the directory first, I'll run into errors when initializing the SQLite
  database or saving the configuration files.

  Actually, looking at how other skills are organized, I should separate the cor
  e logic into a src directory immediately. This keeps the root clean for metada
  ta like package.json. I also need to ensure that the skill directory itself is
  created within the correct parent folder to maintain the project's hierarchy.

  I will start by preparing the workspace. I'll create the property-alerts direc
  tory and its src subfolder. Simultaneously, I'll define the package.json to sp
  ecify the skill's dependencies and entry points. This initial setup is the nec
  essary first step before I can begin populating the files with the actual moni
  toring logic.
â€¢ Now I'll create the property-alerts skill for real estate. Let me set up the s
  tructure:
â€¢ Used Shell (mkdir -p /root/code/skill...kills/property-alerts/src)
â€¢ Used WriteFile (skills/property-alerts/package.json)
â€¢ Used WriteFile (skills/property-alerts/tsconfig.json)
â€¢ Used WriteFile (skills/property-alerts/.gitignore)
â€¢ Now let me create the main index.ts file for the property-alerts skill. This s
  kill needs to:

  1. Save search criteria
  2. Monitor property listings
  3. Detect price changes
  4. Send instant alerts

  I'll create a comprehensive implementation with SQLite storage for saved searc
  hes, property listings, price history, and alerts.
â€¢ Now let me create the main skill implementation:
â€¢ Used WriteFile (skills/property-alerts/src/index.ts)
â€¢ Now I need to create the CLI file for the property-alerts skill. Let me create
  a comprehensive CLI similar to the other skills.
â€¢ Now let me create the CLI:
â€¢ Used WriteFile (skills/property-alerts/src/cli.ts)
â€¢ Now let me create the SKILL.md documentation file for the property-alerts skil
  l.
â€¢ Now let me create the SKILL.md documentation:
â€¢ Used WriteFile (skills/property-alerts/SKILL.md)
â€¢ Now let me run the typecheck to ensure everything compiles correctly:
â€¢ Now let me run typecheck to verify everything compiles:
â€¢ Used Shell (cd /root/code/skills/skil...tall && npm run typecheck)
â€¢ Typecheck passed. Now let me build the project and run a quick test to verify
  everything works:
â€¢ Typecheck passed. Let me build and test the skill:
â€¢ Used Shell (cd /root/code/skills/skil...y-alerts && npm run build)
â€¢ Build succeeded. Let me run a quick test of the CLI to make sure everything wo
  rks:
â€¢ Used Shell (cd /root/code/skills/skil...& node dist/cli.js health)
â€¢ Health check works. Let me also test the search command and the save-search co
  mmand:
â€¢ Used Shell (cd /root/code/skills/skil...min-price 300000 --beds 2)
â€¢ Hmm, the Austin search returned 0 results. Let me check - I think my sample da
  ta might have strict filtering. Let me try without as many filters:
â€¢ Used Shell (cd /root/code/skills/skil...st/cli.js search "Austin")
â€¢ Search is working. The issue was the min-price filter of 300000 combined with
  beds 2. Austin properties matching beds >= 2: prop-001 (450k), prop-002 (325k,
  2 beds), prop-005 (850k). The min-price of 300k filtered out prop-002. Let me
  test more commands:
â€¢ Used Shell (cd /root/code/skills/skil...min-price 300000 --beds 2)
â€¢ Good, the save-search command works. Let me test the alerts check command:
â€¢ Used Shell (cd /root/code/skills/skil... node dist/cli.js check 1)
â€¢ Let me test list-searches and stats:
â€¢ Used Shell (cd /root/code/skills/skil...&& node dist/cli.js stats)
â€¢ All commands are working. Now let me update the PRD to set passes: true for US
  -042 and add a progress entry:
â€¢ All functionality is working. Let me update the PRD and progress log:
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me update the progress.txt file with the new entry:
â€¢ Used WriteFile (progress.txt)
â€¢ Now let me commit the changes:
â€¢ Now let me commit the changes:
â€¢ Used Shell (cd /root/code/skills && git add -A && git status)
â€¢ Good, the changes are staged. Let me commit them:
â€¢ Used Shell (cd /root/code/skills && g...ts skill for real estate")
â€¢ The commit was successful. Let me verify the changes by checking the PRD and r
  unning a final verification:
â€¢ Let me verify the PRD update and check if there are more stories to implement:
â€¢ Used Shell (cd /root/code/skills && n...mplete[0], null, 2)); } ")
â€¢ Good. There are 18 more stories to implement, with US-043 (client-crm) being t
  he next one. Since the instructions say to work on ONE story per iteration, I
  should end here and let the next iteration pick up the next story.

  Let me provide a summary of what was completed:
â€¢ I've successfully completed US-042 - Create property-alerts skill for real est
  ate. Here's a summary:

  Implementation Summary

  Files Created:

  â€¢ skills/property-alerts/package.json - Package configuration
  â€¢ skills/property-alerts/tsconfig.json - TypeScript configuration
  â€¢ skills/property-alerts/.gitignore - Git ignore rules
  â€¢ skills/property-alerts/SKILL.md - Documentation
  â€¢ skills/property-alerts/src/index.ts - Main library (34KB)
  â€¢ skills/property-alerts/src/cli.ts - CLI interface (12KB)

  Features Implemented:

  1. Saved Searches - Save property search criteria with SQLite storage
  2. Property Search - Filter by location, price, beds, baths, sqft, property ty
     status, keywords
  3. Instant Alerts - 5 alert types: new_listing, price_drop, price_increase, st
     s_change, back_on_market
  4. Price Change Detection - Tracks price history and detects changes
  5. Multi-source Support - Works with Zillow API or simulated data (5 sample pr
     rties)

  CLI Commands:

  â€¢ search - Search properties with filters
  â€¢ save-search, list-searches, delete-search - Search management
  â€¢ check - Check for new alerts
  â€¢ alerts, read, read-all, delete-alert - Alert management
  â€¢ history - View price history
  â€¢ stats, health - Monitoring

  Typecheck: âœ… Passed

  Commit: feat: US-042 - Create property-alerts skill for real estate

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Remaining stories: 18 (next: US-043 - client-crm skill)
