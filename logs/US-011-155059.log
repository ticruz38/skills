â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me start by reading the PRD file to understand what needs to be implemente
  d, and also check the progress.txt file to understand the codebase patterns an
  d what has been done so far.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Looking at the PRD, I need to find the highest priority story with passes: fal
  se. Let me scan through:

  â€¢ US-001 through US-010 have passes: true
  â€¢ US-011 (binance skill) has passes: false - Priority 11

  So US-011 is the next story to implement. It's the "Create binance skill for c
  rypto trading" story.

  Let me understand what needs to be done:

  1. US-011: Create binance skill for crypto trading
    â€¢ Depends on: binance-auth
    â€¢ Acceptance Criteria:
      â€¢ Get real-time prices
      â€¢ Check account balances
      â€¢ Place market/limit orders
      â€¢ View order history
      â€¢ Support testnet mode
      â€¢ SQLite for trade history
      â€¢ Typecheck passes

  Let me check the existing skill structure to understand the patterns used, and
  also look at the binance-auth skill since this depends on it.
â€¢ I'll analyze the PRD and progress to find the next story to implement. Looking
  at the data, US-011 (binance skill) is the highest priority story with passes:
  false.

  Let me first check the existing skill structure and the binance-auth skill tha
  t this depends on:
â€¢ Used Glob (skills/*/)
â€¢ Used ReadFile (skills/binance-auth/src/index.ts)
â€¢ Used ReadFile (skills/binance-auth/package.json)
â€¢ Now let me look at one more complete skill to understand the pattern better -
  let me look at the email skill structure since it's also a consumer of another
  auth skill:
â€¢ Let me check the structure of an existing skill like email to understand the p
  atterns:
â€¢ Used ReadFile (skills/email/package.json)
â€¢ Used ReadFile (skills/email/src/index.ts)
â€¢ Used ReadFile (skills/email/tsconfig.json)
â€¢ Hmm, the requirements for the Binance skill are quite comprehensive, covering
  everything from real-time price fetching to placing actual orders and maintain
  ing a local trade history. Since this is a TypeScript project, I need to ensur
  e the architecture aligns with the existing skill structure.

  Wait, I see that this skill depends on binance-auth. I should make sure the pa
  ckage.json reflects this local dependency correctly. Also, using SQLite for th
  e trade history cache means I'll need the sqlite3 library and its correspondin
  g types to ensure type safety during development.

  Actually, before I get into the logic of the index.ts file, I need to establis
  h the skill's foundation. This means creating the directory structure and the
  necessary configuration files like tsconfig.json and .gitignore.

  I have a clear plan now. I'll begin by initializing the skill's directory and
  setting up its manifest and compiler settings. This is the essential first ste
  p before I can implement the BinanceSkill class and the CLI interface.
â€¢ Now I understand the pattern. Let me create the binance skill with all the req
  uired features. I'll create the skill structure:
â€¢ Used Shell (mkdir -p skills/binance/src)
â€¢ Now I'll create the package.json and tsconfig.json files first:
â€¢ Used WriteFile (skills/binance/package.json)
â€¢ Used WriteFile (skills/binance/tsconfig.json)
â€¢ Used WriteFile (skills/binance/.gitignore)
â€¢ Now let me create the main index.ts file for the binance skill. This is the co
  re implementation that will:

  1. Get real-time prices
  2. Check account balances
  3. Place market/limit orders
  4. View order history
  5. Support testnet mode
  6. SQLite for trade history

  Let me write the full implementation:
â€¢ Now let me create the main implementation file. This will be a comprehensive s
  kill for crypto trading:
â€¢ Used WriteFile (skills/binance/src/index.ts)
â€¢ Now I need to create the CLI file for the binance skill. Let me create a compr
  ehensive CLI that allows users to interact with all the features:
â€¢ Now let me create the CLI file:
â€¢ Used WriteFile (skills/binance/src/cli.ts)
â€¢ Now let me create the SKILL.md documentation file for this skill:
â€¢ Now let me create the SKILL.md documentation:
â€¢ Used WriteFile (skills/binance/SKILL.md)
â€¢ Now let me install dependencies and run typecheck to ensure everything compile
  s correctly:
â€¢ Now let me install dependencies and run the typecheck:
â€¢ Used Shell (cd skills/binance && npm install 2>&1)
â€¢ Dependencies installed. Now let's run typecheck to make sure the TypeScript co
  mpiles correctly:
â€¢ Used Shell (cd skills/binance && npm run typecheck 2>&1)
  Failed with exit code: 2
â€¢ I have several type errors to fix. The main issues are:

  1. The BinanceProviderAdapter doesn't have a signedRequest method - I need to
     ck what methods are available
  2. Some type issues with the LocalTradeRecord interface property names
  3. Need to check if accountInfo is null

  Let me check the BinanceProviderAdapter to see what methods are available:
â€¢ I need to check the BinanceProviderAdapter interface and fix the type issues:
â€¢ Used ReadFile (skills/auth-provider/src/providers/binance.ts)
â€¢ I see. The BinanceProviderAdapter doesn't have a signedRequest method - it has
  a request method instead. I also need to fix the LocalTradeRecord interface pr
  operty names (orderId vs order_id, createdAt vs created_at).

  Let me fix all the type errors:
â€¢ I see the issues. The BinanceProviderAdapter uses request() not signedRequest(
  ), and I need to fix the LocalTradeRecord property names. Let me fix these:
â€¢ Used StrReplaceFile (skills/binance/src/index.ts)
â€¢ Now let me also fix the CLI file to use the correct property names:
â€¢ Used StrReplaceFile (skills/binance/src/cli.ts)
â€¢ Now let me run typecheck again to see if there are any remaining issues:
â€¢ Used Shell (cd skills/binance && npm run typecheck 2>&1)
  Failed with exit code: 2
â€¢ There are a few more issues to fix:

  1. The response variable is referenced but doesn't exist anymore after my chan
  2. The request method only accepts 'GET' | 'POST', not 'DELETE'

  Let me check the provider again and fix these issues:
â€¢ Let me fix the remaining issues:
â€¢ Used ReadFile (skills/binance/src/index.ts)
â€¢ I see the issues now. The request method doesn't throw errors on non-ok respon
  ses - it just returns the JSON. So I need to remove the response.ok check. Als
  o, the request method doesn't support DELETE method - I need to check what it
  supports.

  Looking at the provider code again, it only supports 'GET' | 'POST'. For DELET
  E, I need to make a manual request or add DELETE support to the adapter. Let m
  e modify the code to handle this differently. I'll need to make a custom reque
  st for DELETE operations.
â€¢ I see the issues. The request method in the adapter doesn't support DELETE and
  throws on error. Let me fix the implementation:
â€¢ Used ReadFile (skills/binance/src/index.ts)
â€¢ I need to fix the implementation to handle DELETE requests. The adapter's requ
  est method only supports GET and POST. I'll need to add a helper method to mak
  e signed requests manually for DELETE operations. Let me update the code:
â€¢ Used ReadFile (skills/binance/src/index.ts)
â€¢ I need to add a helper method to make signed requests for DELETE operations. L
  et me add that method and fix the getOrder and cancelOrder functions:
â€¢ Used StrReplaceFile (skills/binance/src/index.ts)
â€¢ Now let me fix the getOrder and cancelOrder methods to use the new signedReque
  st method:
â€¢ Now let me fix the getOrder and cancelOrder methods:
â€¢ Used StrReplaceFile (skills/binance/src/index.ts)
â€¢ Now let me also update the other methods that use adapter.request for GET/POST
  operations to use the signedRequest method for consistency, and also fix the o
  pen orders and order history methods:
â€¢ Used StrReplaceFile (skills/binance/src/index.ts)
â€¢ Now I need to also update the createOrder method to use the signedRequest inst
  ead of adapter.request:
â€¢ Used StrReplaceFile (skills/binance/src/index.ts)
â€¢ Now I also need to remove the response.ok check and response.json() call since
  we're now getting the result directly:
â€¢ Used ReadFile (skills/binance/src/index.ts)
â€¢ I see there's duplicate code now - the result is assigned twice. Let me fix th
  is:
â€¢ Used StrReplaceFile (skills/binance/src/index.ts)
â€¢ Now let me run typecheck again to see if all issues are fixed:
â€¢ Used Shell (cd skills/binance && npm run typecheck 2>&1)
â€¢ Typecheck passes now. Let me build the project to make sure everything compile
  s correctly:
â€¢ Typecheck passes. Let me build the project:
â€¢ Used Shell (cd skills/binance && npm run build 2>&1)
â€¢ The build succeeded. Now let me check if there are any tests to run. Let me al
  so check what branch I'm on and verify I should commit these changes:
â€¢ Build succeeded. Let me verify the branch and run a quick check:
â€¢ Used Shell (cd /root/code/skills && c...git branch --show-current)
â€¢ I'm on the correct branch ralph/all-skills. Now let me verify the skill is pro
  perly set up by checking the files that were created:
â€¢ I'm on the correct branch. Let me verify the skill structure:
â€¢ Used Shell (ls -la skills/binance/ &&...t/ 2>/dev/null | head -20)
â€¢ The skill is properly built. Now let me commit the changes, update the PRD, an
  d append to progress.txt. Let me check the git status first:
â€¢ Let me check git status and commit the changes:
â€¢ Used Shell (cd /root/code/skills && git status)
â€¢ Good, I can see the new binance skill directory and the log file. Let me add a
  ll the files and commit:
â€¢ Used Shell (cd /root/code/skills && g... for crypto trading" 2>&1)
â€¢ Commit is done. Now I need to:

  1. Update the PRD to set passes: true for US-011
  2. Append progress to progress.txtLet me update the PRD first:
â€¢ Now let me update the PRD to mark US-011 as complete:
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me append the progress to progress.txt:
â€¢ Now let me append the progress to progress.txt:
â€¢ Used WriteFile (progress.txt)
â€¢ The binance skill is complete. Let me verify by reading the updated PRD to see
  if US-011 now passes: true:
â€¢ Let me verify the PRD update:
â€¢ Used Grep (US-011)
â€¢ US-011 is now marked as passes: true. Let me check if there are any other stor
  ies that still need to be completed by checking all stories with passes: false
  :
â€¢ Let me check if there are more stories to complete:
â€¢ Used Grep ("passes": false)
â€¢ There are still 49 stories with passes: false. The next highest priority story
  would be US-012. Let me verify the work is complete and summarize what was don
  e.
â€¢ US-011 is complete. There are still 49 stories remaining with passes: false.

  Summary

  I successfully implemented US-011: Create binance skill for crypto trading. He
  re's what was built:

  Features Implemented:

  1. Real-time Prices: Get current prices, 24hr statistics, and price history
  2. Account Balances: View all balances or specific asset balances
  3. Order Management: Place market/limit orders, check order status, cancel ord
  4. Order History: View historical orders and trades
  5. Testnet Support: Works with both testnet and production environments
  6. SQLite Storage: Local trade history with notes support
  7. Candlestick Data: Get kline data for technical analysis

  Files Created:

  â€¢ skills/binance/package.json - Dependencies and scripts
  â€¢ skills/binance/tsconfig.json - TypeScript configuration
  â€¢ skills/binance/.gitignore - Git ignore patterns
  â€¢ skills/binance/SKILL.md - Documentation
  â€¢ skills/binance/src/index.ts - Main skill implementation (~900 lines)
  â€¢ skills/binance/src/cli.ts - CLI interface (~600 lines)

  Key Implementation Details:

  â€¢ Built on top of binance-auth skill for secure API authentication
  â€¢ Custom signedRequest() method for HMAC-SHA256 signed API calls
  â€¢ Local SQLite database for trade history and price tracking
  â€¢ Type-safe interfaces for all Binance API responses
  â€¢ Comprehensive CLI with 20+ commands for all trading operations
