â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me understand the task:

  1. Read the PRD at prd.json
  2. Read the progress log at progress.txt
  3. Check I'm on the correct branch from PRD branchName
  4. Pick the highest priority user story where passes: false
  5. Implement that single user story
  6. Run quality checks
  7. Update AGENTS.md files if needed
  8. Commit changes
  9. Update the PRD to set passes: true
  10. Append progress to progress.txt

  Let me start by reading the PRD and progress files.
â€¢ I'll start by reading the PRD and progress files to understand what needs to b
  e done.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt file to see the full context and then
  check which user stories are still pending.
â€¢ Let me continue reading the progress file to see all completed stories and che
  ck which ones are still pending:
â€¢ Used ReadFile (progress.txt)
â€¢ Used Shell (git branch --show-current)
â€¢ Let me continue reading the progress.txt to see all completed stories and then
  identify which stories are still pending.
â€¢ Let me continue reading the progress file and check which stories are still pe
  nding:
â€¢ Used ReadFile (progress.txt)
â€¢ Used Shell (cd /root/code/skills && g...alse' prd.json | head -20)
â€¢ I can see from the grep output that there are 4 user stories still with passes
  : false. Looking at the PRD I read earlier, these are:

  1. US-057: pantry-tracker skill (priority 57)
  2. US-058: diy-guides skill (priority 58)
  3. US-059: review-monitor skill (priority 59)
  4. US-060: saved-searches skill (priority 60)

  The highest priority one that is not passing is US-057: pantry-tracker skill.
  Let me implement that one.

  US-057 details:

  â€¢ Title: Create pantry-tracker skill for inventory
  â€¢ Description: Track pantry inventory
  â€¢ Acceptance Criteria:
    â€¢ Barcode scanning
    â€¢ Low stock alerts
    â€¢ Expiration tracking
    â€¢ Shopping list integration
    â€¢ Typecheck passes
  â€¢ Notes: SQLite storage. No external deps

  Let me start implementing the pantry-tracker skill following the established p
  atterns.
â€¢ I can see there are 4 remaining stories with passes: false. The highest priori
  ty one is US-057: pantry-tracker skill. Let me implement it now.
â€¢ Used SetTodoList
  â€¢ Create pantry-tracker skill structure (package.json, tsconfig.json, etc.) â†
  â€¢ Implement main pantry-tracker library (index.ts)
  â€¢ Implement CLI interface (cli.ts)
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD
â€¢ Used Shell (mkdir -p skills/pantry-tracker/src)
â€¢ Now let me look at a similar skill to understand the pattern. The shopping-lis
  t-generator skill has pantry functionality, so I can use that as a reference.
  Let me also look at the SKILL.md file structure.
â€¢ Let me look at similar skills for reference:
â€¢ Used ReadFile (skills/shopping-list-generator/package.json)
â€¢ Used ReadFile (skills/shopping-list-generator/tsconfig.json)
â€¢ Used ReadFile (skills/SKILL.md)
  File not found
â€¢ Let me check the structure of a simpler skill for reference. Let me look at re
  minders skill which is a simpler local skill with SQLite.
â€¢ Used ReadFile (skills/reminders/package.json)
â€¢ Used ReadFile (skills/reminders/src/index.ts)
â€¢ Good, I have a good understanding of the pattern. Now let me create the pantry
  -tracker skill. It should:

  1. Track pantry inventory items
  2. Support barcode scanning (manual entry or simulated)
  3. Low stock alerts
  4. Expiration tracking
  5. Shopping list integration (can depend on shopping-list-generator)

  Let me create the package.json, tsconfig.json, and SKILL.md files, then the ma
  in index.ts and cli.ts files.
â€¢ Now I'll create the pantry-tracker skill files:
â€¢ Used WriteFile (skills/pantry-tracker/package.json)
â€¢ Used WriteFile (skills/pantry-tracker/tsconfig.json)
â€¢ Used WriteFile (skills/pantry-tracker/.gitignore)
â€¢ Now let me create the main index.ts file for the pantry-tracker skill. I need
  to implement:

  1. Pantry item tracking with name, quantity, unit, category
  2. Barcode scanning support (manual entry)
  3. Low stock alerts
  4. Expiration tracking
  5. Shopping list integration

  Let me create a comprehensive implementation.
â€¢ Used WriteFile (skills/pantry-tracker/src/index.ts)
â€¢ Now I need to create the CLI file for the pantry-tracker skill. This will prov
  ide a command-line interface for managing pantry items.
â€¢ Now let me create the CLI file:
â€¢ Used WriteFile (skills/pantry-tracker/src/cli.ts)
â€¢ Now let me create the SKILL.md file for the pantry-tracker skill.
â€¢ Now let me create the SKILL.md file:
â€¢ Used WriteFile (skills/pantry-tracker/SKILL.md)
â€¢ Now let me install dependencies and run typecheck to verify everything is work
  ing.
â€¢ Used SetTodoList
  â€¢ Create pantry-tracker skill structure (package.json, tsconfig.json, etc.)
  â€¢ Implement main pantry-tracker library (index.ts)
  â€¢ Implement CLI interface (cli.ts)
  â€¢ Run typecheck and verify â†
  â€¢ Commit changes and update PRD
â€¢ Used Shell (cd /root/code/skills/skil...acker && npm install 2>&1)
â€¢ Good, the dependencies are installed. Now let me run typecheck to verify every
  thing compiles correctly.
â€¢ Used Shell (cd /root/code/skills/skil...&& npm run typecheck 2>&1)
â€¢ Typecheck passes. Now let me build the project and test the CLI to make sure i
  t works.
â€¢ Typecheck passes. Let me build and do a quick test:
â€¢ Used Shell (cd /root/code/skills/skil...ker && npm run build 2>&1)
â€¢ Build succeeded. Let me run a quick test of the CLI to verify it works.
â€¢ Used Shell (cd /root/code/skills/skil...e dist/cli.js status 2>&1)
â€¢ The skill is working. Let me test a few more commands to ensure everything wor
  ks properly.
â€¢ Used Shell (cd /root/code/skills/skil... dairy -e 2026-02-15 2>&1)
â€¢ Excellent! Let me test a few more commands.
â€¢ Used Shell (cd /root/code/skills/skil...12 -u count -c dairy 2>&1)
â€¢ Let me test the shopping list and alerts functionality.
â€¢ Used Shell (cd /root/code/skills/skil...cli.js consume 1 1.5 2>&1)
â€¢ The consume command correctly triggers the low stock alert when the quantity f
  alls below the threshold. Let me test a few more commands.
â€¢ Used Shell (cd /root/code/skills/skil...ode dist/cli.js list 2>&1)
â€¢ Excellent! The status icons are working correctly (âš¡ for low stock, âœ“ for nor
  mal). Let me test the shopping list and stats.
â€¢ Used Shell (cd /root/code/skills/skil...cli.js shopping-list 2>&1)
â€¢ The shopping list is generated correctly. Let me test stats and help as well.
â€¢ Used Shell (cd /root/code/skills/skil...de dist/cli.js stats 2>&1)
â€¢ Everything is working correctly. Now let me update the PRD to mark US-057 as p
  assed, commit the changes, and append to progress.txt.
â€¢ All tests pass. Now let me commit the changes and update the PRD:
â€¢ Used SetTodoList
  â€¢ Create pantry-tracker skill structure (package.json, tsconfig.json, etc.)
  â€¢ Implement main pantry-tracker library (index.ts)
  â€¢ Implement CLI interface (cli.ts)
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD â†
â€¢ Used Shell (cd /root/code/skills && g...add -A && git status 2>&1)
â€¢ Now let me commit the changes with the appropriate message.
â€¢ Used Shell (cd /root/code/skills && g...skill for inventory" 2>&1)
â€¢ Now let me update the PRD to mark US-057 as passed.
â€¢ Now let me update the PRD and append to progress.txt:
â€¢ Used StrReplaceFile (prd.json)
  No replacements made
â€¢ The string matching might have issues. Let me try a different approach - just
  search for the specific section.
â€¢ Used Grep (US-057)
â€¢ I can see the exact format. Let me make the replacement with the exact text fr
  om the file.
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me append to the progress.txt file.
â€¢ Now let me append to progress.txt:
â€¢ Used WriteFile (progress.txt)
â€¢ Let me verify the changes and commit the PRD update.
â€¢ Used Shell (cd /root/code/skills && g...r US-057 completion" 2>&1)
â€¢ Let me verify that all the remaining stories are still marked as passing=false
  in the PRD, and summarize what was done.
â€¢ Used SetTodoList
  â€¢ Create pantry-tracker skill structure (package.json, tsconfig.json, etc.)
  â€¢ Implement main pantry-tracker library (index.ts)
  â€¢ Implement CLI interface (cli.ts)
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD
â€¢ Used Shell (cd /root/code/skills && g..."passes": false' prd.json)
â€¢ There are still 3 stories with passes: false. Let me check which ones they are
  .
â€¢ Used Shell (cd /root/code/skills && g...e' prd.json | grep '"id"')
  Failed with exit code: 1
â€¢ Let me use jq to parse the JSON and find the remaining stories.
â€¢ Used Shell (cd /root/code/skills && n....id + ': ' + s.title)); ")
â€¢ There are 3 remaining stories to implement:

  â€¢ US-058: Create diy-guides skill for home repairs
  â€¢ US-059: Create review-monitor skill for reputation
  â€¢ US-060: Create saved-searches skill for research automation

  I've successfully completed US-057: pantry-tracker skill. The implementation i
  ncludes:

  1. Package structure (package.json, tsconfig.json, .gitignore, SKILL.md)
  2. Main library (index.ts) with:
    â€¢ PantryItem tracking with name, quantity, unit, category
    â€¢ Barcode scanning support (manual entry)
    â€¢ Low stock alerts with configurable thresholds
    â€¢ Expiration tracking with status indicators
    â€¢ Shopping list generation
    â€¢ Search functionality
    â€¢ Statistics tracking
    â€¢ Database operations with SQLite
  3. CLI interface (cli.ts) with comprehensive commands
  4. Typecheck passes
  5. Commits and PRD updates

  The story is complete. Since there are still 3 stories remaining with passes:
  false, I should end the response normally and indicate the current state.
â€¢ I have successfully completed US-057: Create pantry-tracker skill for inventor
  y.

  Summary

  What was implemented:

  â€¢ Pantry Tracker Skill - A comprehensive inventory management system for track
    g food and household items

  Features:

  â€¢ âœ… Barcode scanning - Manual entry with auto-restock support for existing it
    s
  â€¢ âœ… Low stock alerts - Configurable thresholds per item
  â€¢ âœ… Expiration tracking - Date tracking with visual alerts (expired, expiring
    oon, warning)
  â€¢ âœ… Shopping list integration - Auto-generate lists from low stock and expire
    items
  â€¢ âœ… Typecheck passes - Clean TypeScript implementation

  Files created:

  â€¢ skills/pantry-tracker/package.json
  â€¢ skills/pantry-tracker/tsconfig.json
  â€¢ skills/pantry-tracker/.gitignore
  â€¢ skills/pantry-tracker/SKILL.md
  â€¢ skills/pantry-tracker/src/index.ts (main library)
  â€¢ skills/pantry-tracker/src/cli.ts (CLI interface)

  Commits made:

  â€¢ feat: US-057 - Create pantry-tracker skill for inventory
  â€¢ chore: update PRD for US-057 completion

  Remaining stories:

  There are 3 stories still pending:

  1. US-058: Create diy-guides skill for home repairs
  2. US-059: Create review-monitor skill for reputation
  3. US-060: Create saved-searches skill for research automation
