â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me start by reading the PRD and progress files to understand what needs to
  be done.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me continue reading the progress.txt file to see what stories have been co
  mpleted and find the next story to work on.
â€¢ Used ReadFile (progress.txt)
â€¢ Let me check the PRD for the next user story with passes: false. From what I'v
  e read, stories US-001 through US-036 are complete (passes: true). The next st
  ory that should have passes: false would be:

  â€¢ US-037: Create recipe-suggester skill for meal ideas

  Let me check the current branch and then implement US-037.
â€¢ Now I can see the progress. Looking at the PRD, the next story with passes: fa
  lse is US-037 - Create recipe-suggester skill for meal ideas. Let me check the
  current git branch and then implement this story.
â€¢ Used Shell (git branch --show-current...ho "No .last-branch file")
â€¢ Used Glob (skills/*)
â€¢ Good, I'm already on the correct branch ralph/all-skills. Now I need to implem
  ent the recipe-suggester skill (US-037).

  Let me look at a similar skill to understand the patterns better. The gift-sug
  gestions skill seems similar in concept - it suggests items based on preferenc
  es. Let me check its structure.
â€¢ I'm on the correct branch. Let me look at a similar skill (gift-suggestions) t
  o understand the patterns, then create the recipe-suggester skill.
â€¢ Used ReadFile (skills/gift-suggestions/src/index.ts)
â€¢ Used ReadFile (skills/gift-suggestions/package.json)
â€¢ Hmm, the requirements for the recipe-suggester skill are quite specific: dieta
  ry filters, ingredient matching, cuisine preferences, and difficulty levels. I
  need to ensure the data model is robust enough to handle these without an exte
  rnal API. Wait, if I'm building a curated database, I should look at how other
  "suggester" skills are implemented in this repository to maintain consistency.
  gift-suggestions seems like a perfect architectural referenceâ€”it likely has a
  local dataset and a logic engine for matching.

  Looking at the codebase patterns, a TypeScript-based CLI skill using SQLite is
  the standard here. I'll need a SKILL.md for documentation and a tsconfig.json
  to handle the build. But before I get into the code, I need to set up the dire
  ctory structure. Actually, I'll need to create the folder and its subdirectori
  es first. I'll organize the skill within the skills/ directory as per the proj
  ect structure. I'll start by scaffolding the necessary folders for the source
  code, distribution files, and the skill's metadata. This initial setup is cruc
  ial for organizing the logic, database, and CLI interface I'll be implementing
  next.
â€¢ Now I have a good understanding of the patterns. Let me create the recipe-sugg
  ester skill with a curated recipe database and suggestion algorithm.
â€¢ Used Shell (mkdir -p skills/recipe-su...lls/recipe-suggester/dist)
â€¢ Now let me create the files for the recipe-suggester skill:

  1. package.json
  2. tsconfig.json
  3. .gitignore
  4. SKILL.md
  5. src/index.ts (main library)
  6. src/cli.ts (CLI interface)
â€¢ Used WriteFile (skills/recipe-suggester/package.json)
â€¢ Used WriteFile (skills/recipe-suggester/tsconfig.json)
â€¢ Used WriteFile (skills/recipe-suggester/.gitignore)
â€¢ Now let me create the SKILL.md documentation file and the main source code for
  the recipe-suggester skill.
â€¢ Used WriteFile (skills/recipe-suggester/SKILL.md)
â€¢ Now let me create the main index.ts file with the recipe database and suggesti
  on logic. I'll create a comprehensive curated recipe database with different c
  uisines, dietary options, and difficulty levels.
â€¢ Now let me create the main library file with the recipe database:
â€¢ Used WriteFile (skills/recipe-suggester/src/index.ts)
â€¢ Now let me create the CLI file for the recipe-suggester skill.
â€¢ Now let me create the CLI interface:
â€¢ Used WriteFile (skills/recipe-suggester/src/cli.ts)
â€¢ Now let me run typecheck to verify everything compiles correctly.
â€¢ Now let me run the typecheck to verify everything compiles correctly:
â€¢ Used Shell (cd skills/recipe-suggeste...pm install 2>&1 | tail -5)
â€¢ Good, the dependencies are installed. Now let me run typecheck.
â€¢ Used Shell (cd skills/recipe-suggeste...&& npm run typecheck 2>&1)
â€¢ Typecheck passes. Now let me build the project and run a quick test to verify
  the CLI works.
â€¢ Typecheck passes. Let me build the project and test the CLI:
â€¢ Used Shell (cd skills/recipe-suggester && npm run build 2>&1)
â€¢ Build successful. Now let me test the CLI with a few commands.
â€¢ Used Shell (cd skills/recipe-suggeste...e dist/cli.js health 2>&1)
â€¢ The health check passes. Let me run a few more tests to verify the functionali
  ty.
â€¢ Used Shell (cd skills/recipe-suggeste...de dist/cli.js stats 2>&1)
â€¢ The stats work correctly. Let me test the suggest functionality with some filt
  ers.
â€¢ Used Shell (cd skills/recipe-suggeste...arian --time 30 -n 3 2>&1)
â€¢ Excellent! The recipe suggester is working correctly. Let me test one more fun
  ctionality - the ingredient search.
â€¢ Used Shell (cd skills/recipe-suggeste...nion --threshold 0.2 2>&1)
â€¢ Hmm, the ingredients search didn't return results. Let me check the CLI to see
  how it processes the arguments. I think the issue is with how the arguments ar
  e being parsed.
â€¢ Let me test with a different approach for the ingredients search:
â€¢ Used Shell (cd skills/recipe-suggeste...ion" --threshold 0.2 2>&1)
â€¢ The ingredients search is working. Now let me test a few more commands and the
  n update the PRD and progress.txt.
â€¢ Let me test the recipe view command:
â€¢ Used Shell (cd skills/recipe-suggeste...t/cli.js get ita-002 2>&1)
â€¢ Excellent! All the functionality is working correctly. Now let me update the P
  RD to set passes: true for US-037 and update the progress.txt file.
â€¢ All tests pass. Now let me update the PRD and progress log:
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me update the progress.txt file with the learnings from this implement
  ation.
â€¢ Used WriteFile (progress.txt)
â€¢ Now let me check if there's an AGENTS.md file in the skills directory that nee
  ds updating, and then commit the changes.
â€¢ Let me check if there's an AGENTS.md file to update and then commit:
â€¢ Used Glob (skills/AGENTS.md)
â€¢ No AGENTS.md file in the skills directory. Let me check the project root.
â€¢ Used ReadFile (AGENTS.md)
  File not found
â€¢ No AGENTS.md file exists. Let me commit the changes now.
â€¢ Now let me commit the changes:
â€¢ Used Shell (cd /root/code/skills && g...add -A && git status 2>&1)
â€¢ Good, all files are staged. Let me commit now.
â€¢ Used Shell (cd /root/code/skills && g...kill for meal ideas" 2>&1)
â€¢ The commit was successful. Now let me verify the PRD to see how many stories a
  re still remaining.
â€¢ I've successfully completed US-037. Let me verify the current status of all st
  ories:
â€¢ Used Shell (cd /root/code/skills && g...'"passes": true' prd.json)
â€¢ There are still 23 stories with passes: false. Let me check which ones are the
  next priorities.
â€¢ There are still 23 stories remaining. Let me check what the next story (US-038
  ) is:
â€¢ Used Shell (cd /root/code/skills && g...'"id": "US-038"' prd.json)
â€¢ US-038 depends on the recipe-suggester skill, which I just completed. The next
  story will be the shopping-list-generator skill.

  Since I've successfully completed US-037 and there are still 23 stories remain
  ing, I should end my response normally to allow another iteration to pick up t
  he next story.
â€¢ Successfully completed US-037 - Create recipe-suggester skill for meal ideas.

  Summary

  Created a comprehensive recipe suggestion skill with:

  â€¢ 30 curated recipes across 10 cuisines (Italian, Mexican, Asian, Mediterranea
    American, Indian, Japanese, French, Thai, Greek)
  â€¢ 9 dietary filters: vegetarian, vegan, gluten-free, keto, paleo, dairy-free,
    t-free, low-carb, low-sodium
  â€¢ 3 difficulty levels: easy, medium, hard
  â€¢ 6 meal types: breakfast, lunch, dinner, snack, dessert, appetizer
  â€¢ Ingredient matching: Find recipes by ingredients you have on hand
  â€¢ Multi-factor scoring algorithm for personalized suggestions
  â€¢ Favorites and cooking history tracking via SQLite
  â€¢ Full nutritional information (calories, protein, carbs, fat)

  Files Created:

  â€¢ skills/recipe-suggester/package.json
  â€¢ skills/recipe-suggester/tsconfig.json
  â€¢ skills/recipe-suggester/.gitignore
  â€¢ skills/recipe-suggester/SKILL.md
  â€¢ skills/recipe-suggester/src/index.ts (main library)
  â€¢ skills/recipe-suggester/src/cli.ts (CLI interface)

  Quality Checks:

  â€¢ âœ… Typecheck passes
  â€¢ âœ… Build successful
  â€¢ âœ… Health check passes
  â€¢ âœ… All CLI commands tested

  Commit:

  feat: US-037 - Create recipe-suggester skill for meal ideas

  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  Next story: US-038 - Create shopping-list-generator skill for groceries (depen
  ds on recipe-suggester)
