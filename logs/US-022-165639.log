â•­â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•®
â”‚ # Ralph Agent Instructions                                                   â”‚
â”‚                                                                              â”‚
â”‚ You are an autonomous coding agent working on a software project.            â”‚
â”‚                                                                              â”‚
â”‚ ## ğŸ›¡ï¸ CRITICAL SAFETY RULES - NEVER VIOLATE                                   â”‚
â”‚                                                                              â”‚
â”‚ ### System Resource Protection                                               â”‚
â”‚ The following actions are **STRICTLY PROHIBITED** and will cause harm to the â”‚
â”‚ host system:                                                                 â”‚
â”‚                                                                              â”‚
â”‚ **Docker/Container Management:**                                             â”‚
â”‚ - **NEVER** run `docker stop` without an explicit container name or ID       â”‚
â”‚ - **NEVER** use `docker stop $(docker ps -q)` or any pattern that stops mult â”‚
â”‚ iple/all containers                                                          â”‚
â”‚ - **NEVER** run `docker rm -f $(docker ps -aq)` or similar mass-removal comm â”‚
â”‚ ands                                                                         â”‚
â”‚ - **ALWAYS** verify container names with `docker ps --filter name=<pattern>` â”‚
â”‚ before stopping                                                              â”‚
â”‚ - **ONLY** stop containers that were explicitly created by this session      â”‚
â”‚ - **ONLY** stop containers using their explicit name: `docker stop <exact-co â”‚
â”‚ ntainer-name>`                                                               â”‚
â”‚                                                                              â”‚
â”‚ **Process Management:**                                                      â”‚
â”‚ - **NEVER** run `killall`, `pkill`, or similar commands without specific pro â”‚
â”‚ cess names                                                                   â”‚
â”‚ - **NEVER** use `kill -9` on system processes or processes you didn't start  â”‚
â”‚ - **ONLY** terminate processes you explicitly started in this session        â”‚
â”‚                                                                              â”‚
â”‚ **Port/Network Conflicts:**                                                  â”‚
â”‚ - If a port is in use, **USE A DIFFERENT PORT** instead of killing the proce â”‚
â”‚ ss using it                                                                  â”‚
â”‚ - Check what's running on a port with `lsof -i :<port>` or `ss -tlnp | grep  â”‚
â”‚ <port>`                                                                      â”‚
â”‚ - Prefer random/high ports (e.g., `docker run -p 0:8080`) to avoid conflicts â”‚
â”‚                                                                              â”‚
â”‚ **General Safety:**                                                          â”‚
â”‚ - **NEVER** run commands that affect system-wide state unless explicitly req â”‚
â”‚ uired by the PRD                                                             â”‚
â”‚ - **NEVER** use wildcards or glob patterns with destructive commands (`rm`,  â”‚
â”‚ `kill`, `stop`)                                                              â”‚
â”‚ - When in doubt, be explicit and specific with resource names                â”‚
â”‚                                                                              â”‚
â”‚ ---                                                                          â”‚
â”‚                                                                              â”‚
â”‚ ## Your Task                                                                 â”‚
â”‚                                                                              â”‚
â”‚ 1. Read the PRD at `prd.json` (in the same directory as this file)           â”‚
â”‚ 2. Read the progress log at `progress.txt` (check Codebase Patterns section  â”‚
â”‚ first)                                                                       â”‚
â”‚ 3. Check you're on the correct branch from PRD `branchName`. If not, check i â”‚
â”‚ t out or create from main.                                                   â”‚
â”‚ 4. Pick the **highest priority** user story where `passes: false`            â”‚
â”‚ 5. Implement that single user story                                          â”‚
â”‚ 6. Run quality checks (e.g., typecheck, lint, test - use whatever your proje â”‚
â”‚ ct requires)                                                                 â”‚
â”‚ 7. Update AGENTS.md files if you discover reusable patterns (see below)      â”‚
â”‚ 8. If checks pass, commit ALL changes with message: `feat: [Story ID] - [Sto â”‚
â”‚ ry Title]`                                                                   â”‚
â”‚ 9. Update the PRD to set `passes: true` for the completed story              â”‚
â”‚ 10. Append your progress to `progress.txt`                                   â”‚
â”‚                                                                              â”‚
â”‚ ## Progress Report Format                                                    â”‚
â”‚                                                                              â”‚
â”‚ APPEND to progress.txt (never replace, always append):                       â”‚
â”‚ ```                                                                          â”‚
â”‚ ## [Date/Time] - [Story ID]                                                  â”‚
â”‚ - What was implemented                                                       â”‚
â”‚ - Files changed                                                              â”‚
â”‚ - **Learnings for future iterations:**                                       â”‚
â”‚   - Patterns discovered (e.g., "this codebase uses X for Y")                 â”‚
â”‚   - Gotchas encountered (e.g., "don't forget to update Z when changing W")   â”‚
â”‚   - Useful context (e.g., "the evaluation panel is in component X")          â”‚
â”‚ ---                                                                          â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ The learnings section is critical - it helps future iterations avoid repeati â”‚
â”‚ ng mistakes and understand the codebase better.                              â”‚
â”‚                                                                              â”‚
â”‚ ## Consolidate Patterns                                                      â”‚
â”‚                                                                              â”‚
â”‚ If you discover a **reusable pattern** that future iterations should know, a â”‚
â”‚ dd it to the `## Codebase Patterns` section at the TOP of progress.txt (crea â”‚
â”‚ te it if it doesn't exist). This section should consolidate the most importa â”‚
â”‚ nt learnings:                                                                â”‚
â”‚                                                                              â”‚
â”‚ ```                                                                          â”‚
â”‚ ## Codebase Patterns                                                         â”‚
â”‚ - Example: Use `sql<number>` template for aggregations                       â”‚
â”‚ - Example: Always use `IF NOT EXISTS` for migrations                         â”‚
â”‚ - Example: Export types from actions.ts for UI components                    â”‚
â”‚ ```                                                                          â”‚
â”‚                                                                              â”‚
â”‚ Only add patterns that are **general and reusable**, not story-specific deta â”‚
â”‚ ils.                                                                         â”‚
â”‚                                                                              â”‚
â”‚ ## Update AGENTS.md Files                                                    â”‚
â”‚                                                                              â”‚
â”‚ Before committing, check if any edited files have learnings worth preserving â”‚
â”‚ in nearby AGENTS.md files:                                                   â”‚
â”‚                                                                              â”‚
â”‚ 1. **Identify directories with edited files** - Look at which directories yo â”‚
â”‚ u modified                                                                   â”‚
â”‚ 2. **Check for existing AGENTS.md** - Look for AGENTS.md in those directorie â”‚
â”‚ s or parent directories                                                      â”‚
â”‚ 3. **Add valuable learnings** - If you discovered something future developer â”‚
â”‚ s/agents should know:                                                        â”‚
â”‚    - API patterns or conventions specific to that module                     â”‚
â”‚    - Gotchas or non-obvious requirements                                     â”‚
â”‚    - Dependencies between files                                              â”‚
â”‚    - Testing approaches for that area                                        â”‚
â”‚    - Configuration or environment requirements                               â”‚
â”‚                                                                              â”‚
â”‚ **Examples of good AGENTS.md additions:**                                    â”‚
â”‚ - "When modifying X, also update Y to keep them in sync"                     â”‚
â”‚ - "This module uses pattern Z for all API calls"                             â”‚
â”‚ - "Tests require the dev server running on PORT 3000"                        â”‚
â”‚ - "Field names must match the template exactly"                              â”‚
â”‚                                                                              â”‚
â”‚ **Do NOT add:**                                                              â”‚
â”‚ - Story-specific implementation details                                      â”‚
â”‚ - Temporary debugging notes                                                  â”‚
â”‚ - Information already in progress.txt                                        â”‚
â”‚                                                                              â”‚
â”‚ Only update AGENTS.md if you have **genuinely reusable knowledge** that woul â”‚
â”‚ d help future work in that directory.                                        â”‚
â”‚                                                                              â”‚
â”‚ ## Quality Requirements                                                      â”‚
â”‚                                                                              â”‚
â”‚ - ALL commits must pass your project's quality checks (typecheck, lint, test â”‚
â”‚ )                                                                            â”‚
â”‚ - Do NOT commit broken code                                                  â”‚
â”‚ - Keep changes focused and minimal                                           â”‚
â”‚ - Follow existing code patterns                                              â”‚
â”‚                                                                              â”‚
â”‚ ## Browser Testing (Required for Frontend Stories)                           â”‚
â”‚                                                                              â”‚
â”‚ For any story that changes UI, you MUST verify it works in the browser:      â”‚
â”‚                                                                              â”‚
â”‚ 1. Load the `dev-browser` skill                                              â”‚
â”‚ 2. Navigate to the relevant page                                             â”‚
â”‚ 3. Verify the UI changes work as expected                                    â”‚
â”‚ 4. Take a screenshot if helpful for the progress log                         â”‚
â”‚                                                                              â”‚
â”‚ A frontend story is NOT complete until browser verification passes.          â”‚
â”‚                                                                              â”‚
â”‚ ## Stop Condition                                                            â”‚
â”‚                                                                              â”‚
â”‚ After completing a user story, check if ALL stories have `passes: true`.     â”‚
â”‚                                                                              â”‚
â”‚ If ALL stories are complete and passing, reply with:                         â”‚
â”‚ <promise>COMPLETE</promise>                                                  â”‚
â”‚                                                                              â”‚
â”‚ If there are still stories with `passes: false`, end your response normally  â”‚
â”‚ (another iteration will pick up the next story).                             â”‚
â”‚                                                                              â”‚
â”‚ ## Important                                                                 â”‚
â”‚                                                                              â”‚
â”‚ - Work on ONE story per iteration                                            â”‚
â”‚ - Commit frequently                                                          â”‚
â”‚ - Keep CI green                                                              â”‚
â”‚ - Read the Codebase Patterns section in progress.txt before starting         â”‚
â•°â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â•¯
â€¢ Let me start by understanding the task. I'm an autonomous coding agent working
  on a software project. I need to:

  1. Read the PRD at prd.json
  2. Read the progress log at progress.txt
  3. Check I'm on the correct branch from PRD branchName
  4. Pick the highest priority user story where passes: false
  5. Implement that single user story
  6. Run quality checks
  7. Update AGENTS.md files if needed
  8. Commit changes
  9. Update the PRD to set passes: true
  10. Append progress to progress.txt

  Let me start by reading the necessary files.
â€¢ I'll start by reading the PRD and progress files to understand what needs to b
  e implemented.
â€¢ Used ReadFile (prd.json)
â€¢ Used ReadFile (progress.txt)
â€¢ Let me analyze the PRD and progress to find the highest priority story with pa
  sses: false:

  From the PRD, I can see that:

  â€¢ US-001 through US-021 have passes: true
  â€¢ US-022 has passes: false and is the next highest priority story with priorit
    22

  US-022: Create social-scheduler skill for posting

  â€¢ Description: Schedule posts to social platforms
  â€¢ Acceptance Criteria:
    â€¢ Queue management
    â€¢ Optimal timing suggestions
    â€¢ Multi-platform support
    â€¢ Draft approval workflow
    â€¢ SQLite storage
    â€¢ Typecheck passes
  â€¢ Priority: 22
  â€¢ Passes: false
  â€¢ Notes: Depends: google-oauth (YouTube). Uses model for content

  Let me check the current branch and then look at existing skills to understand
  the patterns.
â€¢ Now I understand the task. I need to find the highest priority story with pass
  es: false. Looking at the PRD, US-022 through US-060 all have passes: false. T
  he highest priority is US-022: Create social-scheduler skill for posting (prio
  rity 22).

  Let me first check the git branch and explore the existing skill patterns:
â€¢ Used Shell (git branch --show-current && cat .last-branch)
â€¢ Used Glob (skills/*)
â€¢ I'm on the correct branch ralph/all-skills. Let me look at an existing skill t
  o understand the patterns, especially one that uses SQLite and has scheduling
  capabilities (like reminders or meetings). The content-writer skill is also a
  good reference since it's recent and well-structured.
â€¢ Good, I'm on the correct branch. Let me examine some existing skills to unders
  tand the patterns, particularly ones with scheduling and SQLite storage:
â€¢ Used ReadFile (skills/content-writer/src/index.ts)
â€¢ Used ReadFile (skills/content-writer/package.json)
â€¢ Used ReadFile (skills/reminders/src/index.ts)
â€¢ I've analyzed the existing skill architecture, and the patterns for the social
  -scheduler are becoming clear. It needs to be a TypeScript-based system using
  SQLite for persistence, which is standard for this project. The core requireme
  nt is to build a scheduling engine that doesn't just store posts, but manages
  them through a full lifecycle: from initial draft to approval, and finally to
  publication.

  Wait, I also need to account for the 'optimal timing suggestions' mentioned in
  the PRD. This implies a logic layer that can analyze historical engagement or
  at least provide sensible defaults for different platforms. And the draft appr
  oval workflow is crucialâ€”it suggests a state-based model where a post isn't im
  mediately queued but requires a status change.

  Actually, looking at the dependencies, I'll need to integrate with google-oaut
  h to handle YouTube uploads later, and likely use the internal model for gener
  ating the actual content. To keep this manageable and ensure I hit every accep
  tance criteriaâ€”like queue management and multi-platform supportâ€”I should forma
  lize the roadmap before I start writing code. I'll initialize a todo list to t
  rack the creation of the skill's directory, the database schema, the scheduler
  logic, and the final integration. This will keep the implementation focused an
  d systematic.
â€¢ Now I have a good understanding of the patterns. Let me create the social-sche
  duler skill. This skill needs:

  â€¢ Queue management for scheduled posts
  â€¢ Optimal timing suggestions
  â€¢ Multi-platform support
  â€¢ Draft approval workflow
  â€¢ SQLite storage
â€¢ Used SetTodoList
  â€¢ Create social-scheduler directory structure and config files â†
  â€¢ Implement main skill class with SQLite storage
  â€¢ Implement CLI interface
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD
â€¢ Let me start by creating the directory structure and files for the social-sche
  duler skill.
â€¢ Used Shell (mkdir -p skills/social-scheduler/src)
â€¢ Now let me create the package.json and tsconfig.json files.
â€¢ Used WriteFile (skills/social-scheduler/package.json)
â€¢ Used WriteFile (skills/social-scheduler/tsconfig.json)
â€¢ Used WriteFile (skills/social-scheduler/.gitignore)
â€¢ Now let me create the main SKILL.md file and the main index.ts file with the f
  ull implementation.
â€¢ Used WriteFile (skills/social-scheduler/SKILL.md)
â€¢ Now let me create the main index.ts file. This is going to be a comprehensive
  implementation.
â€¢ Used WriteFile (skills/social-scheduler/src/index.ts)
â€¢ Now let me create the CLI file.
â€¢ Used SetTodoList
  â€¢ Create social-scheduler directory structure and config files
  â€¢ Implement main skill class with SQLite storage
  â€¢ Implement CLI interface â†
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD
â€¢ Used WriteFile (skills/social-scheduler/src/cli.ts)
â€¢ Now let me run the typecheck to make sure everything compiles correctly.
â€¢ Used SetTodoList
  â€¢ Create social-scheduler directory structure and config files
  â€¢ Implement main skill class with SQLite storage
  â€¢ Implement CLI interface
  â€¢ Run typecheck and verify â†
  â€¢ Commit changes and update PRD
â€¢ Used Shell (cd skills/social-schedule...m install 2>&1 | tail -10)
â€¢ Good, npm install succeeded. Now let me run the typecheck.
â€¢ Used Shell (cd skills/social-schedule...&& npm run typecheck 2>&1)
â€¢ Typecheck passes. Let me also build the project to make sure everything compil
  es correctly.
â€¢ Used Shell (cd skills/social-scheduler && npm run build 2>&1)
â€¢ The build succeeded. Now let me test the CLI quickly to make sure it works.
â€¢ Used Shell (cd skills/social-schedule...pm run cli -- health 2>&1)
â€¢ The skill is working. Let me test a few more commands to make sure everything
  is functioning correctly.
â€¢ Used Shell (cd skills/social-schedule...ptimal-times twitter 2>&1)
â€¢ Let me test queueing a post and then listing posts.
â€¢ Used Shell (cd skills/social-schedule...r --when "in 1 hour" 2>&1)
â€¢ Let me test a few more commands - listing posts, queueing with approval, appro
  ving a post, and stats.
â€¢ Used Shell (cd skills/social-schedule...tomorrow" --approval 2>&1)
â€¢ Let me test the list command and stats.
â€¢ Used Shell (cd skills/social-schedule... npm run cli -- list 2>&1)
â€¢ Let me test the stats and approve commands.
â€¢ Used Shell (cd skills/social-schedule...npm run cli -- stats 2>&1)
â€¢ Now let me test the approve command.
â€¢ Used Shell (cd skills/social-schedule...-notes "Looks good!" 2>&1)
â€¢ Excellent! Let me test the get command to see all the details.
â€¢ Used Shell (cd skills/social-schedule...npm run cli -- get 2 2>&1)
â€¢ The skill is working correctly. Now let me update the todo list, commit the ch
  anges, and update the PRD.
â€¢ Used SetTodoList
  â€¢ Create social-scheduler directory structure and config files
  â€¢ Implement main skill class with SQLite storage
  â€¢ Implement CLI interface
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD â†
â€¢ Used Shell (cd /root/code/skills && git add -A && git status)
â€¢ Good, all the files are staged. Let me commit the changes and update the PRD.
â€¢ Used Shell (cd /root/code/skills && g...r skill for posting" 2>&1)
â€¢ Now let me update the PRD to set passes: true for US-022.
â€¢ Used StrReplaceFile (prd.json)
â€¢ Now let me append the progress to progress.txt.
â€¢ Used Shell (cat >> /root/code/skills/...data per platform --- EOF)
â€¢ Let me update the todo list to show completion, and verify the PRD was updated
  correctly.
â€¢ Used SetTodoList
  â€¢ Create social-scheduler directory structure and config files
  â€¢ Implement main skill class with SQLite storage
  â€¢ Implement CLI interface
  â€¢ Run typecheck and verify
  â€¢ Commit changes and update PRD
â€¢ Used Shell (cd /root/code/skills && g...'"id": "US-022"' prd.json)
â€¢ Let me check the passes field for US-022 in the PRD to make sure it was update
  d correctly.
â€¢ Used Shell (cd /root/code/skills && g...'"id": "US-022"' prd.json)
â€¢ Let me check the full entry including the passes field.
â€¢ Used Shell (cd /root/code/skills && g...'"id": "US-022"' prd.json)
â€¢ The PRD has been updated with passes: true for US-022. Let me verify there are
  still more stories to complete by checking how many have passes: false.
â€¢ Used Shell (cd /root/code/skills && g..."passes": false' prd.json)
â€¢ There are still 38 stories with passes: false. The next one to work on is US-0
  23. Since there are still incomplete stories, I should not return COMPLETE. Le
  t me provide a summary of what was done.
â€¢ I have successfully completed US-022: Create social-scheduler skill for postin
  g.

  Summary

  What was implemented:

  â€¢ Social Scheduler skill with comprehensive post scheduling capabilities
  â€¢ Queue management: SQLite storage for posts with status tracking
  â€¢ Multi-platform support: Twitter/X, LinkedIn, Facebook, Instagram, YouTube, G
    eric
  â€¢ Optimal timing suggestions: Platform-specific best posting times based on in
    stry research
  â€¢ Draft approval workflow: Full workflow from draft â†’ pending_approval â†’ sched
    ed â†’ published/failed/cancelled
  â€¢ Natural language datetime parsing: "tomorrow", "in 2 hours", "tuesday at 9",
    tc.

  Files created:

  â€¢ skills/social-scheduler/package.json
  â€¢ skills/social-scheduler/tsconfig.json
  â€¢ skills/social-scheduler/.gitignore
  â€¢ skills/social-scheduler/SKILL.md
  â€¢ skills/social-scheduler/src/index.ts
  â€¢ skills/social-scheduler/src/cli.ts

  Quality checks:

  â€¢ âœ… Typecheck passes
  â€¢ âœ… Build succeeds
  â€¢ âœ… CLI tested and working

  Changes committed:

  â€¢ Commit: feat: US-022 - Create social-scheduler skill for posting

  PRD updated:

  â€¢ US-022 now has "passes": true

  There are still 38 stories remaining with passes: false. The next story to imp
  lement is US-023: Create engagement-replies skill for social responses.
